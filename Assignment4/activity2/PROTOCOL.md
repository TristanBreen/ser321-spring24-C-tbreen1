## Protocol Elaboration

*Note:* **CL == client, SV == server**

### Logging in
1) CL Request
Client sends over their name
```
RequestType: NAME
Required Fields: name
```
2. SV Response
Server responds with a greeting message
```
ResponseType: HELLO
Require Fields: message -- this is just a greeting message to the client
```

### View Leader Board (from main menu)
CL Request
Clients wants the leaderboard
```
RequestType: LEADERBOARD
Required Fields: *none*
```
SV Response
Server responds with a repeated field of all past players
```
ResponseType: LEADERBOARD
Required Fields: leaderboard (repeated field) including everyone on the leaderboard
```
### Play Game (from main menu)
Client wants a game to be started/joined
CL Request
```
RequestType: NEW
Required Fields: *none*
```
SV Response
Server responds with a message specifying if the game is joined or started.
```
ResponseType: TASK
Required Fields: image, task
```
CL Request
While in game the client sends an answer to the server
```
RequestType: ANSWER
Required Fields: answer
```
SV Response
If game is not yet won the server will reply with a TASK again
```
	ResponseType: TASK
	Required Fields: image, task, eval
```
	eval will either be true/false
	- if false the task will be the same as previous one

OR if game is won the current finished image will be send and a message that the game has been won. message field has some winning comment.
```
	ResponseType: WON
	Required Fields: image, message
```

### Quit Game 
Client wants to quit the game 
CL Request
```
RequestType: QUIT
Required Fields: *none*
```
SV Response
```
RequestType: BYE
Required Fields: message
```
message field includes some good bye message. 

### Errors
*These can be generated by any malformed or unexpected request. The client*
*is responsible for keeping track of state to continue.*

SV Response
```
ResponseType: ERROR
RequiredFields: message (description of error), type
```
Some error types to use:
1 - required field missing -- in message name the field
2 - request not supported -- in message name the request that is not supported
0 - any other errors, in this case the message will just be displayed

*NOTE: The client should display the error message that is sent by the server so the client can display it to the player.*